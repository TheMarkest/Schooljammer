from subprocess import Popen, PIPE, call 
import csv 
import os 
import time
import pprint

#OLD FILES REMOVE
def delairodumpfiles(path):
   
    delfile(path + '-01.cap')
    delfile(path + '-01.csv')
    delfile(path + '-01.kismet.csv')
    delfile(path + '-01.kismet.netxml')

def delfile(path):
    try:
        os.remove(path)
    except OSError:
        pass
path='/home/pi/jammer'
delairodumpfiles('/home/pi/jammer')
monmode=['airmon-ng','start','wlan1']
dump=['airodump-ng','-a','-w','/home/pi/jammer','wlan1mon']
monproc=Popen(monmode)
monproc.wait()
startofscan=time.time()
dumpproc=Popen(dump)
while dumpproc.poll()==None:
    time.sleep(0.5)
    if((time.time()-startofscan)>10):
        dumpproc.kill()
dumpfile=open(path + '-01.csv','r')
dumptable=[]
for row in csv.reader(dumpfile):
    dumptable.append(row)

#dumptable=[row for row in csv.reader(dumpfile)]
dumpfile.close()
pprint.pprint(dumptable)
exit()
